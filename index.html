<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Castify - Home</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-auth.js"></script>
</head>
<body>
  <header>
    <nav class="navbar">
      <div class="logo">
        <img src="https://i.ibb.co/nCqS9g0/rushfordclean-1.png" id="logo-img" alt="Castify Logo" onclick="reloadPage()">
      </div>
      <ul class="nav-links">
        <li><a href="#videos">Videos</a></li>
        <li><a href="#channels">Channels</a></li>
        <li><a href="#newest">Newest</a></li>
        <li><a href="#community">Community</a></li>
      </ul>
      <div class="search-bar">
        <input type="text" placeholder="Search...">
        <button>üîç</button>
      </div>
      <div class="user-actions">
        <!-- –ö–Ω–æ–ø–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
        <img src="https://cdn.pixabay.com/photo/2020/10/31/06/28/youtube-bell-icon-5700370_1280.png" id="notification-icon" alt="Notifications" class="icon" onclick="toggleNotifications()" style="display:none;">
        <span id="notification-count" class="hidden">0</span>
        <div id="notification-popup" class="hidden">
          <ul id="notifications-list">
            <li>No notifications</li>
          </ul>
        </div>
        <div id="user-profile" class="hidden">
          <span id="username-display"></span> | <a href="profile.html">Profile</a>
        </div>
        <button id="login-button" onclick="toggleLoginState()">Login / Register</button>
        <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –≤—ã–ª–æ–∂–∏—Ç—å –≤–∏–¥–µ–æ, —Å–∫—Ä—ã—Ç–∞, –µ—Å–ª–∏ –≤–∏–¥–µ–æ –Ω–µ—Ç -->
        <button id="upload-button" class="hidden" onclick="uploadVideo()">Upload Video</button>
      </div>
    </nav>
  </header>

  <main>
    <div id="left-ad" class="ad-banner left-ad hidden"></div>
    <section id="welcome-section">
      <h1>Welcome to Castify</h1>
      <p>Your hub for discovering and sharing amazing videos.</p>
    </section>
    <section id="content">
      <h2>Recommended for You</h2>
      <div id="recommendations" class="recommendations-list"></div>
    </section>
    <div id="right-ad" class="ad-banner right-ad hidden"></div>
  </main>

  <footer>
    <p>¬© 2024 Castify. All rights reserved.</p>
  </footer>

  <script src="app.js"></script>
  <script>
    // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è Firebase (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Firebase –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞)
    const firebaseConfig = {
      apiKey: "your-api-key",
      authDomain: "your-auth-domain",
      projectId: "your-project-id",
      storageBucket: "your-storage-bucket",
      messagingSenderId: "your-messaging-sender-id",
      appId: "your-app-id"
    };
    const app = firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Ñ–æ–Ω–∞
    function setRandomBackground() {
      fetch('https://api.unsplash.com/photos/random?client_id=-3QG_HoJ0tTBVRZ-pJRfAx7PCIYP_K_l4flTXErK1tg')
        .then(response => response.json())
        .then(data => {
          const imageUrl = data[0].urls.full;
          document.body.style.backgroundImage = `url(${imageUrl})`;
          document.body.style.backgroundSize = 'cover';
          document.body.style.backgroundPosition = 'center';
        })
        .catch(error => {
          console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–æ–Ω–∞:", error);
        });
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ / —Å–∫—Ä—ã—Ç–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
    function toggleNotifications() {
      const notificationsPopup = document.getElementById("notification-popup");
      notificationsPopup.classList.toggle("hidden");
      document.getElementById("notification-count").classList.add("hidden"); // –°–∫—Ä—ã—Ç—å —Å—á–µ—Ç—á–∏–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –ª–æ–≥–æ—Ç–∏–ø
    function reloadPage() {
      location.reload();
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤—Ö–æ–¥–∞ / —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
    function toggleLoginState() {
      if (auth.currentUser) {
        // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –≤–æ—à–µ–ª, —Å–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –≤—Ö–æ–¥–∞
        auth.signOut();
        document.getElementById("login-button").textContent = "Login / Register";
        document.getElementById("notification-icon").style.display = "none";
        document.getElementById("upload-button").classList.add("hidden");
      } else {
        // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–æ—à–µ–ª, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –≤—Ö–æ–¥–∞
        auth.signInAnonymously();
        document.getElementById("login-button").textContent = "Logout";
      }
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–µ–æ (–ø–æ–∫–∞ –∏–º–∏—Ç–∏—Ä—É–µ–º)
    function uploadVideo() {
      // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–µ–æ
      console.log("Upload video function triggered.");
      // –ü—Ä–∏–º–µ—Ä: –æ–±–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤–∏–¥–µ–æ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ
      checkForVideos();
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –≤–∏–¥–µ–æ
    function checkForVideos() {
      db.collection("videos").get().then(snapshot => {
        if (snapshot.empty) {
          // –ï—Å–ª–∏ –Ω–µ—Ç –≤–∏–¥–µ–æ, —Å–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "Upload Video"
          document.getElementById("upload-button").classList.add("hidden");
        } else {
          // –ï—Å–ª–∏ –µ—Å—Ç—å –≤–∏–¥–µ–æ, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "Upload Video"
          document.getElementById("upload-button").classList.remove("hidden");
        }
      });
    }

    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–π —Ñ–æ–Ω –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    window.onload = () => {
      setRandomBackground();
      checkForVideos();
    };
  </script>
</body>
</html>
